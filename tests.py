import streamlit as st
import pandas as pd
import random
from PIL import Image
import matplotlib.pyplot as plt
import numpy as np

# 페이지 기본 설정
st.set_page_config(
    page_title="MBTI 시험 기간 멘탈 관리 가이드",
    page_icon="🧠",
    layout="wide"
)

# 메인 타이틀 및 소개
def main_page():
    st.title("🧠 MBTI별 시험 기간 스트레스 & 멘탈 관리법")
    st.subheader("당신의 MBTI 유형에 맞는 최적의 시험 기간 관리법을 찾아보세요!")
    
    st.write("""
    시험 기간, 모두가 똑같은 스트레스를 받는 것은 아니에요. 
    MBTI 유형별로 스트레스 요인과 해소 방법이 다르답니다.
    당신의 MBTI를 선택하고 맞춤형 멘탈 관리 가이드를 확인해보세요!
    """)
    
    # MBTI 선택
    mbti_types = ['ISTJ', 'ISFJ', 'INFJ', 'INTJ', 'ISTP', 'ISFP', 'INFP', 'INTP', 
                 'ESTP', 'ESFP', 'ENFP', 'ENTP', 'ESTJ', 'ESFJ', 'ENFJ', 'ENTJ']
    
    col1, col2 = st.columns([1, 1])
    
    with col1:
        selected_mbti = st.selectbox("당신의 MBTI를 선택하세요:", mbti_types)
        st.write(f"선택하신 MBTI는 **{selected_mbti}** 입니다.")
        
        if st.button("맞춤 가이드 보기"):
            show_mbti_guide(selected_mbti)
    
    with col2:
        st.image("https://i.imgur.com/JM77Vkt.png", caption="MBTI 유형별 특성", use_column_width=True)

# MBTI 유형별 가이드 정보
def get_mbti_data():
    mbti_data = {
        'ISTJ': {
            '특성': '체계적이고 책임감이 강함',
            '스트레스_요인': ['갑작스러운 계획 변경', '비효율적인 공부 환경', '불명확한 시험 범위'],
            '관리법': ['명확한 일정표 작성하기', '조용한 공부 환경 확보하기', '체크리스트로 진도 관리하기', '규칙적인 휴식 시간 갖기'],
            '추천_공부법': '개념을 체계적으로 정리하고 반복 학습하는 방식',
            '색상': '#1E88E5'  # 파란색
        },
        'ISFJ': {
            '특성': '세심하고 헌신적임',
            '스트레스_요인': ['과도한 경쟁 환경', '급격한 변화', '타인의 기대에 대한 부담'],
            '관리법': ['소규모 스터디 그룹 활용하기', '익숙한 환경에서 공부하기', '감정 일기 쓰기', '좋아하는 음악 들으며 휴식하기'],
            '추천_공부법': '노트 정리와 실생활 연관 지어 이해하기',
            '색상': '#7CB342'  # 녹색
        },
        'INFJ': {
            '특성': '이상주의적이고 통찰력이 뛰어남',
            '스트레스_요인': ['의미 없는 암기식 공부', '지나친 소음과 혼잡함', '가치관과 맞지 않는 과목'],
            '관리법': ['공부의 의미와 목적 되새기기', '명상과 심호흡으로 마음 다스리기', '창의적 시각화 기법 활용하기', '자연 속에서 휴식 취하기'],
            '추천_공부법': '개념 간 연결성을 찾고 큰 그림 이해하기',
            '색상': '#8E24AA'  # 보라색
        },
        'INTJ': {
            '특성': '전략적이고 독립적임',
            '스트레스_요인': ['비논리적인 학습 방식', '시간 낭비', '능력 발휘 못하는 상황'],
            '관리법': ['장기적 학습 전략 세우기', '독립적 공부 시간 확보하기', '지식 체계화하기', '새로운 지적 도전으로 기분 전환하기'],
            '추천_공부법': '개념을 분석하고 체계적으로 접근하기',
            '색상': '#3949AB'  # 남색
        },
        'ISTP': {
            '특성': '논리적이고 적응력이 뛰어남',
            '스트레스_요인': ['지나친 이론 중심 학습', '장기간 앉아있는 공부', '엄격한 규칙과 틀'],
            '관리법': ['실용적인 문제 해결에 집중하기', '짧은 집중 시간과 휴식 번갈아가며 공부하기', '손으로 무언가 만지작거리며 공부하기', '취미 활동으로 머리 식히기'],
            '추천_공부법': '실전 문제 풀이와 실습 중심 학습',
            '색상': '#EF6C00'  # 주황색
        },
        'ISFP': {
            '특성': '예술적이고 조화를 추구함',
            '스트레스_요인': ['경직된 학습 환경', '지나친 경쟁', '창의성 발휘 못하는 과목'],
            '관리법': ['아름다운 공부 환경 만들기', '시각적 학습 도구 활용하기', '예술 활동으로 스트레스 해소하기', '감각적 경험으로 기분 전환하기'],
            '추천_공부법': '시각화와 개인적 의미 부여하며 학습하기',
            '색상': '#D81B60'  # 분홍색
        },
        'INFP': {
            '특성': '이상주의적이고 창의적임',
            '스트레스_요인
